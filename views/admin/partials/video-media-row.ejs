<form class="tr newly-added">
    <!--<div class="td">
        <input type="checkbox" name="select-product" />
    </div>-->
    <div class="td">
        <button type="button" class="edit-button actions"><i class="fa fa-pencil" aria-hidden="true"></i></button>
        <button type="button" class="delete-button actions"><i class="fa fa-trash" aria-hidden="true"></i></button>
        <button type="button" class="save-button actions"><i class="fa fa-floppy-o" aria-hidden="true"></i></button>
        <button type="button" class="close-button actions"><i class="fa fa-times" aria-hidden="true"></i></button>
    </div>
    <div class="td">
        <%= videoMedia.id _%><input name="id" type="hidden" value="<%= videoMedia.id _%>" />
    </div>
    <div class="td">
        <div class="display-field"><%= videoMedia.name _%></div>
        <div class="edit-field form-group">
            <input type="text" name="name" value="<%= videoMedia.name _%>" class="form-control form-control-success form-control-danger" />
        </div>
    </div>
    <div class="td">
        <div class="display-field"><%- videoMedia.description && videoMedia.description.length > 200 ? videoMedia.description.substring(0, 200) + '<span>&hellip;</span>' : videoMedia.description _%></div>
        <div class="edit-field form-group">
            <textarea name="description" class="form-control form-control-success form-control-danger"><%= videoMedia.description _%></textarea>
        </div>
    </div>
    <div class="td">
        <div class="display-field"><%= moment(new Date(videoMedia.theater_release_date)).format('DD/MM/YYYY') _%></div>
        <div class="edit-field form-group">
            <input type="text" name="theater_release_date" value="<%= moment(new Date(videoMedia.theater_release_date)).isValid() ? moment(new Date(videoMedia.theater_release_date)).format('DD/MM/YYYY') : '' _%>" class="form-control form-control-success form-control-danger" />
        </div>
    </div>
    <div class="td">
        <div class="display-field"><%= moment(new Date(videoMedia.tv_release_date)).format('DD/MM/YYYY') _%></div>
        <div class="edit-field form-group">
            <input type="text" name="tv_release_date" value="<%= moment(new Date(videoMedia.tv_release_date)).isValid() ? moment(new Date(videoMedia.tv_release_date)).format('DD/MM/YYYY') : '' _%>" class="form-control form-control-success form-control-danger" />
        </div>
    </div>
    <div class="td">
        <div class="display-field"><%= videoMedia.release_country _%></div>
        <div class="edit-field form-group">
            <input type="text" name="release_country" value="<%= videoMedia.release_country _%>" class="form-control form-control-success form-control-danger" />
        </div>
    </div>
    <div class="td">
        <div class="display-field"><%= videoMedia.duration _%></div>
        <div class="edit-field form-group">
            <input type="text" name="duration" value="<%= videoMedia.duration _%>" class="form-control form-control-success form-control-danger" />
        </div>
    </div>
    <div class="td">
        <div class="display-field"><img src="<%= videoMedia.poster_url.replace(/-original/g, '-thumbnail') _%>" alt="<%= videoMedia.picture_alt _%>" title="<%= videoMedia.picture_title _%>" /></div>
        <div class="edit-field form-group">
            <input type="text" placeholder="url" name="poster_url" value="<%= videoMedia.poster_url _%>" class="form-control form-control-success form-control-danger" />
            <input type="text" placeholder="alt" name="poster_alt" value="<%= videoMedia.poster_alt _%>" class="form-control form-control-success form-control-danger" />
            <input type="text" placeholder="title" name="poster_title" value="<%= videoMedia.poster_title _%>" class="form-control form-control-success form-control-danger" />
        </div>
    </div>
    <div class="td">
        <div class="display-field"><%= videoMedia.video_url _%></div>
        <div class="edit-field form-group">
            <input type="text" name="video_url" value="<%= videoMedia.video_url _%>" class="form-control form-control-success form-control-danger" />
        </div>
    </div>
    <div class="td">
        <div class="display-field"><%- videoMedia.synopsis && videoMedia.synopsis.length > 200 ? videoMedia.synopsis.substring(0, 200) + '<span>&hellip;</span>' : videoMedia.synopsis _%></div>
        <div class="edit-field form-group">
            <textarea name="synopsis" class="form-control form-control-success form-control-danger"><%= videoMedia.synopsis _%></textarea>
        </div>
    </div>
    <div class="td">
        <div class="display-field"><%= videoMedia.tv_broadcaster _%></div>
        <div class="edit-field form-group">
            <input type="text" name="tv_broadcaster" value="<%= videoMedia.tv_broadcaster _%>" class="form-control form-control-success form-control-danger" />
        </div>
    </div>
    <div class="td">
        <div class="display-field"><%= videoMedia.mediaGenre.name _%></div>
        <div class="edit-field form-group">
            <select name="media_genre_id" data-field-name="mediaGenre" class="form-control form-control-success form-control-danger">
                <%_ genres.forEach(function(genre){ _%>
                <option value="<%= genre.id _%>"<%= videoMedia.mediaGenre.id === genre.id ? ' selected' : ''_%>><%= genre.name _%></option>
                <%_ }); _%>
            </select>
            <input name="media_genre_name" type="hidden" value="<%= videoMedia.mediaGenre.name _%>" />
        </div>
    </div>
    <div class="td">
        <div class="display-field">
            <ul>
                <%_ videoMedia.categories.forEach(function(category){ _%>
                <li><%= category.name _%></li>
                <%_ }); _%>
            </ul>
        </div>
        <div class="edit-field form-group">
            <select name="categories" class="form-control form-control-success form-control-danger" multiple>
                <%_ videoMedia.categories.forEach(function(category){ _%>
                <option selected value="<%= category.id _%>"><%= category.name _%></option>
                <%_ }); _%>
            </select>
        </div>
    </div>
    <div class="td">
        <div class="display-field">
            <button class="see-products-button btn btn-default" data-toggle="modal" data-target="#modify-products-modal" type="button">Voir les produits</button>
        </div>
        <div class="edit-field">
            <button class="modify-products-button btn btn-default" data-toggle="modal" data-target="#modify-products-modal" type="button">Modifier les produits</button>
        </div>
        <div class="linked-products table table-striped table-hover table-sm" data-type="movie">
            <div class="tr thead-inverse">
                <div class="th">ID</div>
                <div class="th">Marque</div>
                <div class="th">Nom</div>
                <div class="th">Image</div>
                <div class="th">Match</div>
                <div class="th">Contexte</div>
                <div class="th">Time code</div>
                <div class="th edit-field">Suppr.</div>
            </div>
            <%_ videoMedia.products.forEach(function(product){ _%>
            <div class="tr">
                <div class="td">
                    <div>
                        <%= product.id _%><input name="id" type="hidden" value="<%= product.id _%>" />
                    </div>
                </div>
                <div class="td">
                    <div><%= product.brand.name _%></div>
                </div>
                <div class="td">
                    <div><%= product.name _%></div>
                </div>
                <div class="td">
                    <div>
                        <img src="<%= product.picture_url.replace(/-original/g, '-thumbnail') _%>" alt="<%= product.picture_alt _%>" title="<%= product.picture_title _%>" />
                    </div>
                </div>
                <div class="td">
                    <div class="display-field">
                        <div class="matching-status <%= product._pivot_matching_status_id === 1 ? 'exact-match' : 'close-match' _%>"></div>
                    </div>
                    <div class="edit-field form-group">
                        <input type="checkbox" name="matching_status_id" value="1" <%= product._pivot_matching_status_id === 1 ? 'checked' : '' %> class="form-control" />
                    </div>
                </div>
                <div class="td">
                    <div class="display-field"><%= product._pivot_appearing_context _%></div>
                    <div class="edit-field form-group">
                        <input type="text" name="appearing_context" value="<%= product._pivot_appearing_context _%>" class="form-control" />
                    </div>
                </div>
                <div class="td">
                    <div class="display-field"><%= product._pivot_time_codes _%></div>
                    <div class="edit-field form-group">
                        <input type="text" name="time_codes" value="<%= product._pivot_time_codes _%>" class="form-control" />
                    </div>
                </div>
                <div class="td">
                    <div class="edit-field">
                        <button type="button" class="delete-linked-button"><i class="fa fa-trash" aria-hidden="true"></i></button>
                    </div>
                </div>
            </div>
            <%_ }); _%>
        </div>
    </div>
    <div class="td">
        <div class="display-field">
            <button class="see-locations-button btn btn-default" data-toggle="modal" data-target="#modify-locations-modal" type="button">Voir les lieux</button>
        </div>
        <div class="edit-field">
            <button class="modify-locations-button btn btn-default" data-toggle="modal" data-target="#modify-locations-modal" type="button">Modifier les lieux</button>
        </div>
        <div class="linked-locations table table-striped table-hover table-sm">
            <div class="tr thead-inverse">
                <div class="th">ID</div>
                <div class="th">Nom</div>
                <div class="th">V.E.P.</div>
                <div class="th">Image</div>
                <div class="th">Contexte</div>
                <div class="th">Time code</div>
                <div class="th edit-field">Suppr.</div>
            </div>
            <%_ videoMedia.locations.forEach(function(location){ _%>
            <div class="tr">
                <div class="td">
                    <div>
                        <%= location.id _%><input name="id" type="hidden" value="<%= location.id _%>" />
                    </div>
                </div>
                <div class="td">
                    <div><%= location.name _%></div>
                </div>
                <div class="td">
                    <div><%= location.city_state_country _%></div>
                </div>
                <div class="td">
                    <div>
                        <img src="<%= location.picture_url.replace(/-original/g, '-thumbnail') _%>" alt="<%= location.picture_alt _%>" title="<%= location.picture_title _%>" />
                    </div>
                </div>
                <div class="td">
                    <div class="display-field"><%= location._pivot_appearing_context _%></div>
                    <div class="edit-field form-group">
                        <input type="text" name="appearing_context" value="<%= location._pivot_appearing_context _%>" class="form-control" />
                    </div>
                </div>
                <div class="td">
                    <div class="display-field"><%= location._pivot_time_codes _%></div>
                    <div class="edit-field form-group">
                        <input type="text" name="time_codes" value="<%= location._pivot_time_codes _%>" class="form-control" />
                    </div>
                </div>
                <div class="td">
                    <div class="edit-field">
                        <button type="button" class="delete-linked-button"><i class="fa fa-trash" aria-hidden="true"></i></button>
                    </div>
                </div>
            </div>
            <%_ }); _%>
        </div>
    </div>
    <div class="td">
        <div class="display-field">
            <button class="see-looks-button btn btn-default" data-toggle="modal" data-target="#modify-looks-modal" type="button">Voir les looks</button>
        </div>
        <div class="edit-field">
            <button class="modify-looks-button btn btn-default" data-toggle="modal" data-target="#modify-looks-modal" type="button">Modifier les looks</button>
        </div>
        <div class="linked-looks table table-striped table-hover table-sm">
            <div class="tr thead-inverse">
                <div class="th">ID</div>
                <div class="th">Nom</div>
                <div class="th edit-field">Suppr.</div>
            </div>
            <%_ videoMedia.looks.forEach(function(look){ _%>
            <div class="tr">
                <div class="td">
                    <div>
                        <%= look.id _%><input name="id" type="hidden" value="<%= look.id _%>" />
                    </div>
                </div>
                <div class="td">
                    <div><%= look.name _%></div>
                </div>
                <div class="td">
                    <div class="edit-field">
                        <button type="button" class="delete-linked-button"><i class="fa fa-trash" aria-hidden="true"></i></button>
                    </div>
                </div>
            </div>
            <%_ }); _%>
        </div>
    </div>
    <div class="td">
        <div class="display-field">
            <button class="see-sets-button btn btn-default" data-toggle="modal" data-target="#modify-sets-modal" type="button">Voir les décors</button>
        </div>
        <div class="edit-field">
            <button class="modify-sets-button btn btn-default" data-toggle="modal" data-target="#modify-sets-modal" type="button">Modifier les décors</button>
        </div>
        <div class="linked-sets table table-striped table-hover table-sm">
            <div class="tr thead-inverse">
                <div class="th">ID</div>
                <div class="th">Nom</div>
                <div class="th">Image</div>
                <div class="th">Loc.</div>
                <div class="th edit-field">Suppr.</div>
            </div>
            <%_ videoMedia.sets.forEach(function(set){ _%>
            <div class="tr">
                <div class="td">
                    <div>
                        <%= set.id _%><input name="id" type="hidden" value="<%= set.id _%>" />
                    </div>
                </div>
                <div class="td">
                    <div><%= set.name _%></div>
                </div>
                <div class="td">
                    <div>
                        <img src="<%= set.picture_url.replace(/-original/g, '-thumbnail') _%>" alt="<%= set.picture_alt _%>" title="<%= set.picture_title _%>" />
                    </div>
                </div>
                <div class="td">
                    <div><%= set.place _%></div>
                </div>
                <div class="td">
                    <div class="edit-field">
                        <button type="button" class="delete-linked-button"><i class="fa fa-trash" aria-hidden="true"></i></button>
                    </div>
                </div>
            </div>
            <%_ }); _%>
        </div>
    </div>
    <div class="td">
        <div><%= moment(videoMedia.created_at).format('DD-MMMM-YYYY') _%></div>
    </div>
    <div class="td">
        <div><%= videoMedia.updated_at ? moment(videoMedia.updated_at).format('DD-MMMM-YYYY') : 'Pas de MAJ' _%></div>
    </div>
    <div class="td">
        <button type="button" class="edit-button actions"><i class="fa fa-pencil" aria-hidden="true"></i></button>
        <button type="button" class="delete-button actions"><i class="fa fa-trash" aria-hidden="true"></i></button>
        <button type="button" class="save-button actions"><i class="fa fa-floppy-o" aria-hidden="true"></i></button>
        <button type="button" class="close-button actions"><i class="fa fa-times" aria-hidden="true"></i></button>
    </div>
</form>